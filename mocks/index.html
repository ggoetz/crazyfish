<!DOCTYPE html>
<html>
<head>
    <title> :: crazyfish :: all your events in one place </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/bootstrap-theme.min.css" rel="stylesheet">
    <link href="css/datepicker.css" rel="stylesheet">
    <link href="css/crazyfish.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400,700' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body>

<div class="container">
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/cf_utils.js"></script>

    <div class="above-header-spacer"></div>
    <div class="logo-container" align="center">
            <img src="img/logo-white-transparent.png">
    </div>
    <br/><br/><br/>

    <div id="container" style="position:relative;">
    </div>

</div>

<div class="main-search dropdown">

	<form class="form-inline" role="form" action="search" method="get">
        <span class="form-text" id="firstWord">Show me events on</span>

		<span class="form-text" id='dateBlank'>
			<font color="#11b1d3" face="helvetica, arial" size="5px">_ _ _ _ _ _ _ _ _ _ _ _ _</font>   
		</span>
        
        <span class="form-group" id="DPLoc">
			<label id='dateLabelAndInput'>  
				<input type="text" name="date" class="form-control datepicker" data-toggle="dropdown" id="datePicker" placeholder="date" readonly>  
            </label>    
            <script src="js/bootstrap-datepicker.js"></script>
        </span>

        <span class="form-text"> in </span>

		<span class="form-text" id='locationBlank'> 
			<font color="#11b1d3" face="helvetica, arial" size="5px">_ _ _ _ _ _ _ _ _ _ _ _ _</font>
		</span>
		
        <span class="form-group">
			<label class="dropdown-toggle" data-toggle="dropdown" id='locationLabelAndInput'>
				<input  type="text" name="location" class="form-control" value="Palo Alto, CA" readonly>
            </label>
            <ul class="dropdown-menu" role="menu">
                <li>We're only available in Palo Alto, CA for now!
            </ul>
        </span>

    </form>
    
    </div>
    <div class="button-container" align="center">
			<input type="submit" id="go" class="btn btn-search" value="LET'S GO">
    </div>

<script>
	
    $(document).ready( function() { //set today's date as the default
		var now = new Date();
		$('#datePicker').val(CfUtils.format_as_day_month_date(now));
	});
	
    $('.dropdown-toggle').dropdown();
    $('.datepicker').datepicker({placeInside:'#DPLoc'});

	$(window).load(main_search_center_and_wrap);
 	$(window).resize(main_search_center_and_wrap);
    
    function main_search_center_and_wrap() {
		reposition_inputs(); // first reposition inputs since this affects where the last word appears, which we depend on for centering
	    main_search_center_content(); // center contents of main-search
	    main_search_adjust_height(); // then adjust height of main-search
	    reposition_inputs(); // reposition inputs again after having done centering step
	}
    
	function main_search_center_content() {
		var main_search_width = $('.main-search').outerWidth();
		var lastWordPos = $('#locationBlank').position();
		var firstWordPos = $('#firstWord').position();
		if (lastWordPos.top == firstWordPos.top) { // if they are on the same line
			var main_content_width = lastWordPos.left + $('#locationBlank').outerWidth() - firstWordPos.left;
			var sidePadding = (main_search_width - main_content_width)/2 +'px';
			console.log(sidePadding);
			$('.main-search').css({'padding-left': sidePadding, 'padding-right': sidePadding});
		} else {
			$('.main-search').css({'padding-left': '30px', 'padding-right': '30px'});
		}
	}
	
	function main_search_adjust_height() { // adjust height of div so that the darker blue is behind all the text
		var lastWordPos = $('#locationBlank').position();
		$('.main-search').css('height',(lastWordPos.top + 75) + 'px'); // 75px is arbitrary / looks reasonable
	}
	
	function reposition_single_input(line_id, input_id) { // positions input on top of line_id element 
		var linePos = $(line_id).position();
		$(input_id).css({position:'absolute', 
						left:linePos.left,
						top:linePos.top - 5}); // -5px so that input text sits above line
	}
	
	function reposition_inputs() {
		// Keep all the inputs on their respective "_ _ _ _"'s 
		// by moving the label (that input element is inside) to where the "_ _ _" is
		reposition_single_input('#dateBlank', '#dateLabelAndInput');
		reposition_single_input('#locationBlank', '#locationLabelAndInput');
	}

</script>
    
</body>
</html>
